# Learn more about services, parameters and containers at
# https://symfony.com/doc/current/service_container.html
parameters:
    skeleton_base_dir: %kernel.root_dir%/../../skeletons
    recipe_base_dir: %kernel.root_dir%/../../recipes

services:
    # default configuration for services in *this* file
    _defaults:
        # automatically injects dependencies in your services
        autowire: true
        # automatically registers your services as commands, event subscribers, etc.
        autoconfigure: true
        # this means you cannot fetch services directly from the container via $container->get()
        # if you need to do this, you can override this setting on individual services
        public: false

    # makes classes in src/AppBundle available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    AppBundle\:
        resource: '../../src/AppBundle/*'
        # you can exclude directories or files
        # but if a service is unused, it's removed anyway
        exclude: '../../src/AppBundle/{Entity,Repository,Tests}'

    Recipes\:
        resource: '../../../recipes/*'
        public: true

    # add more services, or override services that need manual wiring
    # AppBundle\Service\ExampleService:
    #     arguments:
    #         $someArgument: 'some_value'

    AppBundle\Configuration\Builder:
        public: true

    AppBundle\Configuration\Configuration:
        public: true

    AppBundle\Configuration\RecipeManager:
        arguments:
            - "%recipe_base_dir%"
        calls:
            - method: setContainer
              arguments:
                - "@service_container"

    AppBundle\Wizard\Manager:
        public: true
    
#    AppBundle\Wizard\Symfony\SymfonyProjectChainWizard:
#        public: true
#        tags:
#            - { name: wizard, group: 'Full builder wizards', priority: 100 }
#
#    AppBundle\Wizard\Base\GitCloneWizard:
#        arguments:
#            - "@filesystem"
#            - 'git@github.com:fchris82/symfony-demo.git'
#        tags:
#            - { name: wizard, group: 'Only builders', priority: 50 }
#        public: true
#
#    AppBundle\Wizard\Symfony\SymfonyBuildWizard:
#        tags:
#            - { name: wizard, group: 'Only builders', priority: 50 }
#        public: true

    AppBundle\Wizard\Symfony\SymfonyComposerBuildWizard:
        tags:
            - { name: wizard, group: 'Builders', priority: 50 }
        public: true

    AppBundle\Wizard\Base\GitlabCISkeleton:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators' }
        public: true

    AppBundle\Wizard\Base\PhpCsFixSkeleton:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators' }
        public: true

    AppBundle\Wizard\Base\PhpMdSkeleton:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators' }
        public: true

    AppBundle\Wizard\Base\DeployerSkeleton:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators', priority: -10 }
        public: true

    AppBundle\Wizard\Docker\DevEnvironment:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators', priority: 20 }
        public: true

    AppBundle\Wizard\Docker\Slim:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Decorators', priority: 10 }
        public: true

#    AppBundle\Wizard\Docker\Wide:
#        arguments:
#            - %skeleton_base_dir%
#            - "@twig"
#            - "@filesystem"
#        tags:
#            - { name: wizard, group: 'Decorators', priority: 11 }
#        public: true

    AppBundle\Wizard\Ez\EzBuildMakefileWizard:
        arguments:
            - %skeleton_base_dir%
            - "@twig"
            - "@filesystem"
        tags:
            - { name: wizard, group: 'Builders', priority: 20 }
        public: true
